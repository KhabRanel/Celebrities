{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="row">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏) -->
        <div class="col-md-8">
            <!-- –ë–ª–æ–∫ –¥–ª—è –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è -->
            {% if birthday_celebrities %}
                <div class="mb-4">
                    <div class="card mb-4">
                        <h3>üéâ –°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É:</h3>
                        {% for birthday_celebrity in birthday_celebrities %}
                            <div class="p-3 bg-light rounded">
                                <h3><a href="{{ birthday_celebrity.get_absolute_url }}" class="text-decoration-none">{{ birthday_celebrity.name }}</a></h3>
                                <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> {{ birthday_celebrity.country }}</p>
                                <p><strong>–†–æ–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong> {{ birthday_celebrity.cat }}</p>
                                <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ birthday_celebrity.birth_date }}</p>
                                <p><strong>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ birthday_celebrity.content }}</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}

            <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–µ–π -->
            <div id="celebrities-list">
                {% for celebrity in celebrities %}
                    <div class="card mb-4">
                        <div class="mb-4">
                            <h3><a href="{{ celebrity.get_absolute_url }}" class="text-decoration-none">{{ celebrity.name }}</a></h3>
                            <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> {{ celebrity.country }}</p>
                            <p><strong>–†–æ–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong> {{ celebrity.cat }}</p>
                            <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ celebrity.birth_date }}</p>
                            <p><strong>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ celebrity.content }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë" -->
            <button id="show-more" class="btn btn-primary mt-3">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
        </div>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
        <div class="col-md-4">
            <div class="card">
                <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <ul class="list-unstyled">
                    <li><a href="{% url 'category' 'kino' %}" class="text-decoration-none">–ö–∏–Ω–æ</a></li>
                    <li><a href="{% url 'category' 'sport' %}" class="text-decoration-none">–°–ø–æ—Ä—Ç</a></li>
                    <li><a href="{% url 'category' 'muzyka' %}" class="text-decoration-none">–ú—É–∑—ã–∫–∞</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const showMoreButton = document.getElementById('show-more');
        const celebritiesList = document.getElementById('celebrities-list');
        const allCelebrities = {{ all_celebrities|safe }};  // –í—Å–µ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

        let visibleCount = 4;  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤–∏–¥–∏–º—ã—Ö –∑–∞–ø–∏—Å–µ–π

        showMoreButton.addEventListener('click', function() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ 4 –∑–∞–ø–∏—Å–∏
            for (let i = visibleCount; i < visibleCount + 4 && i < allCelebrities.length; i++) {
                const celebrity = allCelebrities[i];
                const celebrityHtml = `
                    <div class="card mb-4">
                        <div class="mb-4">
                            <h3><a href="${celebrity.slug}" class="text-decoration-none">${celebrity.name}</a></h3>
                            <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> ${celebrity.country}</p>
                            <p><strong>–†–æ–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong> ${celebrity.cat}</p>  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                            <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> ${celebrity.birth_date}</p>
                            <p><strong>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:</strong> ${celebrity.content}</p>
                        </div>
                    </div>
                `;
                celebritiesList.insertAdjacentHTML('beforeend', celebrityHtml);
            }

            visibleCount += 4;

            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–æ–∫–∞–∑–∞–Ω—ã
            if (visibleCount >= allCelebrities.length) {
                showMoreButton.style.display = 'none';
            }
        });
    });
</script>
{% endblock %}